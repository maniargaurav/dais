<?php

/*
|--------------------------------------------------------------------------
|   Dais
|--------------------------------------------------------------------------
|
|   This file is part of the Dais Framework package.
|    
|   (c) Vince Kronlein <vince@dais.io>
|    
|   For the full copyright and license information, please view the LICENSE
|   file that was distributed with this source code.
|   
|   Your table prefix has been included so that you can easily write your 
|   migrations to include the proper prefix.
|   
|   $users = $this->create_table("{$this->prefix}users");
|
|   Obviously if you have no table prefix, this variable will be empty.
|   
*/

namespace Database\Migration;
use Egress\Library\Migration\MigrationBase;

class CreateCategory_20150524063215 extends MigrationBase {

    private $prefix = 'dais_';

    public function up() {
        $table = $this->create_table("{$this->prefix}category", array(
            'id'      => false, 
            'options' => 'Engine=InnoDB'
        ));

        $table->column('category_id', 'integer', array('unsigned' => true, 'primary_key' => true, 'auto_increment' => true));
        $table->column('image', 'string', array('null' => true));
        $table->column('parent_id', 'integer', array('unsigned' => true));
        $table->column('top', 'tinyinteger', array('unsigned' => true, 'limit' => 1));
        $table->column('columns', 'integer', array('unsigned' => true, 'limit' => 3));
        $table->column('sort_order', 'integer', array('unsigned' => true, 'limit' => 3));
        $table->column('status', 'tinyinteger', array('unsigned' => true, 'limit' => 1));
        $table->column('date_added', 'datetime', array('default' => '0000-00-00 00:00:00'));
        $table->column('date_modified', 'datetime', array('default' => '0000-00-00 00:00:00'));
        
        $table->finish();

        $sql = "INSERT INTO `{$this->prefix}category` (`category_id`, `image`, `parent_id`, `top`, `columns`, `sort_order`, `status`, `date_added`, `date_modified`) VALUES
                (17, '', 0, 1, 1, 4, 1, '2009-01-03 21:08:57', '2014-06-28 01:02:28'),
                (18, 'data/demo/hp_2.jpg', 0, 1, 0, 2, 1, '2009-01-05 21:49:15', '2014-06-28 01:06:55'),
                (20, 'data/demo/compaq_presario.jpg', 0, 1, 1, 1, 1, '2009-01-05 21:49:43', '2014-09-16 06:49:47'),
                (24, '', 0, 1, 1, 5, 1, '2009-01-20 02:36:26', '2014-06-28 01:02:39'),
                (25, '', 0, 1, 1, 3, 1, '2009-01-31 01:04:25', '2014-06-28 01:00:35'),
                (26, '', 20, 0, 0, 1, 1, '2009-01-31 01:55:14', '2014-06-28 01:07:06'),
                (27, '', 20, 0, 0, 2, 1, '2009-01-31 01:55:34', '2014-06-28 01:07:17'),
                (28, '', 25, 0, 0, 1, 1, '2009-02-02 13:11:12', '2014-06-28 01:01:09'),
                (29, '', 25, 0, 0, 1, 1, '2009-02-02 13:11:37', '2014-06-28 01:00:57'),
                (30, '', 25, 0, 0, 1, 1, '2009-02-02 13:11:59', '2014-06-28 01:08:08'),
                (31, '', 25, 0, 0, 1, 1, '2009-02-03 14:17:24', '2014-06-28 01:07:52'),
                (32, '', 25, 0, 0, 1, 1, '2009-02-03 14:17:34', '2014-06-28 01:07:41'),
                (33, '', 0, 1, 1, 6, 1, '2009-02-03 14:17:55', '2014-12-31 19:37:25'),
                (34, 'data/demo/ipod_touch_4.jpg', 0, 1, 4, 7, 1, '2009-02-03 14:18:11', '2014-06-28 01:06:06'),
                (35, '', 28, 0, 0, 0, 1, '2010-09-17 10:06:48', '2014-06-28 01:01:31'),
                (36, '', 28, 0, 0, 0, 1, '2010-09-17 10:07:13', '2014-06-28 01:01:44'),
                (37, '', 34, 0, 0, 0, 1, '2010-09-18 14:03:39', '2014-06-28 01:03:32'),
                (38, '', 34, 0, 0, 0, 1, '2010-09-18 14:03:51', '2014-06-28 01:03:41'),
                (39, '', 34, 0, 0, 0, 1, '2010-09-18 14:04:17', '2014-06-28 01:03:20'),
                (40, '', 34, 0, 0, 0, 1, '2010-09-18 14:05:36', '2014-06-28 01:03:12'),
                (41, '', 34, 0, 0, 0, 1, '2010-09-18 14:05:49', '2014-06-28 01:03:03'),
                (42, '', 34, 0, 0, 0, 1, '2010-09-18 14:06:34', '2014-06-28 01:02:49'),
                (43, '', 34, 0, 0, 0, 1, '2010-09-18 14:06:49', '2014-06-28 01:05:54'),
                (44, '', 34, 0, 0, 0, 1, '2010-09-21 15:39:21', '2014-06-28 01:05:44'),
                (45, '', 18, 0, 0, 0, 1, '2010-09-24 18:29:16', '2014-06-28 01:06:20'),
                (46, '', 18, 0, 0, 0, 1, '2010-09-24 18:29:31', '2014-06-28 01:06:35'),
                (47, '', 34, 0, 0, 0, 1, '2010-11-07 11:13:16', '2014-06-28 01:05:36'),
                (48, '', 34, 0, 0, 0, 1, '2010-11-07 11:13:33', '2014-06-28 01:05:29'),
                (49, '', 34, 0, 0, 0, 1, '2010-11-07 11:14:04', '2014-06-28 01:05:14'),
                (50, '', 34, 0, 0, 0, 1, '2010-11-07 11:14:23', '2014-06-28 01:05:05'),
                (51, '', 34, 0, 0, 0, 1, '2010-11-07 11:14:38', '2014-06-28 01:04:59'),
                (52, '', 34, 0, 0, 0, 1, '2010-11-07 11:16:09', '2014-06-28 01:04:51'),
                (53, '', 34, 0, 0, 0, 1, '2010-11-07 11:28:53', '2014-06-28 01:04:30'),
                (54, '', 34, 0, 0, 0, 1, '2010-11-07 11:29:16', '2014-06-28 01:04:12'),
                (55, '', 34, 0, 0, 0, 1, '2010-11-08 10:31:32', '2014-06-28 01:03:56'),
                (56, '', 34, 0, 0, 0, 1, '2010-11-08 10:31:50', '2014-06-28 01:03:48'),
                (57, '', 0, 1, 1, 3, 1, '2011-04-26 08:53:16', '2014-06-28 01:02:19'),
                (58, '', 52, 0, 0, 0, 1, '2011-05-08 13:44:16', '2014-06-28 01:04:38')";

        $this->execute($sql);
    }

    public function down() {
        $this->drop_table("{$this->prefix}category");
    }
}
